<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.course.mapper.CourseFileMapper">

    <resultMap id="BaseResultMap" type="com.course.entity.CourseFile">
        <id column="id" property="id" />
        <result column="details_id" property="detailsId" />
        <result column="file_type" property="fileType" />
        <result column="file_name" property="fileName" />
        <result column="file_old_name" property="fileOldName" />
        <result column="file_path" property="filePath" />
        <result column="show_flag" property="showFlag" />
        <result column="file_content" property="fileContent" />
        <result column="valid_flag" property="validFlag" />
        <result column="created_time" property="createdTime" />
        <result column="updated_time" property="updatedTime" />
        <result column="menu_id" property="menuId" />
    </resultMap>

    <select id="queryFileByPage" resultMap="BaseResultMap" parameterType="com.course.entity.CourseFile">
        SELECT
        course_file.*
        FROM
        course_file
        where 1=1
        <if test="fileType != null and fileType != ''">
            and file_type = #{fileType}
        </if>
        <if test="fileName != null and fileName != ''">
            and (file_name like #{fileName} or file_content like #{fileName})
        </if>
        <if test="menuId != null and menuId != ''">
            and menu_id = #{menuId}
        </if>
        <if test="detailsId != null and detailsId != ''">
            and details_id = #{detailsId}
        </if>
        order by updated_time desc,id
        limit #{page},#{pagesize}
    </select>

</mapper>
